<script>
(function(window) {
  var isIE = navigator.userAgent.indexOf('MSIE') !== -1 || navigator.appVersion.indexOf('Trident/') > 0

  // exit if not IE and browser implements that event in the same time
  if ('onhashchange' in window.document.body && !isIE) return;

  var location = window.location;
  var oldURL = location.href;
  var oldHash = location.hash;

  // check the location hash on a 100ms interval
  setInterval(function() {
    var newURL = location.href;
    var newHash = location.hash;
    // if the hash has changed and a handler has been bound...
    if ( newHash != oldHash && typeof window.onhashchange === 'function') {
      // execute the handler
      window.onhashchange({
        type: 'hashchange',
        oldURL: oldURL,
        newURL: newURL
      });

      oldURL = newURL;
      oldHash = newHash;
    }
  }, 100);
})(window);  
</script>