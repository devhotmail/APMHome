<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>

        <p:dialog id="selectAssetDlg" widgetVar="varSelectAssetDlg" modal="true" resizable="true" draggable="true" header="#{msg.selectAsset}" width="80%">
            <h:form id="selectAssetForm">
                    <p:dataTable id="selectAssetDatalist" value="#{selectAssetController.lazyModel}" var="item" widgetVar="varSelectAssetDatalist"
                                 selectionMode="single" selection="#{selectAssetController.selected}"
                                 lazy="true" paginator="true" paginatorPosition="top" paginatorAlwaysVisible="true"
                                 rowKey="#{item.id}" sortMode="single" sortOrder="descending" sortBy="#{item.id}"
                                 paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} #{msg.RowsPerPage}: {RowsPerPageDropdown}"
                                 currentPageReportTemplate="#{msg.recordCount}: {totalRecords}" pageLinks="5"
                                 rows="20" emptyMessage="#{msg.noRecordFound}"
                                 rowsPerPageTemplate="20,40,60,90">

                        <p:ajax event="rowSelect" update=""/>
                        <p:ajax event="filter" listener="#{assetInfoController.onFilter}" update=""/>

                        <p:column headerText="#{msg.name}" sortBy="#{item.name}" filterBy="#{item.name}" filterMatchMode="LIKE">
                            <h:outputText value="#{item.name}"/>
                        </p:column>
                        <p:column headerText="#{msg.manufacture}" sortBy="#{item.manufacture}" filterBy="#{item.manufacture}" filterMatchMode="LIKE">
                            <h:outputText value="#{item.manufacture}"/>
                        </p:column>
                        <p:column headerText="#{msg.vendor}" sortBy="#{item.vendor}" filterBy="#{item.vendor}" filterMatchMode="LIKE">
                            <h:outputText value="#{item.vendor}"/>
                        </p:column>
                        <p:column headerText="#{msg.maitanance}" sortBy="#{item.maitanance}" filterBy="#{item.maitanance}" filterMatchMode="LIKE">
                            <h:outputText value="#{item.maitanance}"/>
                        </p:column>
                        <p:column headerText="#{msg.maitananceTel}" sortBy="#{item.maitananceTel}" filterBy="#{item.maitananceTel}" filterMatchMode="LIKE">
                            <h:outputText value="#{item.maitananceTel}"/>
                        </p:column>
                        <p:column headerText="#{msg.serialNum}" sortBy="#{item.serialNum}" filterBy="#{item.serialNum}" filterMatchMode="LIKE">
                            <h:outputText value="#{item.serialNum}"/>
                        </p:column>
                        <p:column headerText="#{msg.departNum}" sortBy="#{item.departNum}" filterBy="#{item.departNum}" filterMatchMode="LIKE">
                            <h:outputText value="#{item.departNum}"/>
                        </p:column>
                        <p:column headerText="#{msg.financingNum}" sortBy="#{item.financingNum}" filterBy="#{item.financingNum}" filterMatchMode="LIKE">
                            <h:outputText value="#{item.financingNum}"/>
                        </p:column>
                        <p:column headerText="#{msg.locationName}" sortBy="#{item.locationName}" filterBy="#{item.locationName}" filterMatchMode="LIKE">
                            <h:outputText value="#{item.locationName}"/>
                        </p:column>
                        <p:column headerText="#{msg.clinicalDeptName}" sortBy="#{item.clinicalDeptName}" filterBy="#{item.clinicalDeptName}" filterMatchMode="LIKE">
                            <h:outputText value="#{item.clinicalDeptName}"/>
                        </p:column>
                        <p:column headerText="#{msg.assetGroup}" sortBy="#{item.assetGroup}" filterBy="#{item.assetGroup}" filterMatchMode="EQ">
                            <h:outputText value="#{item.assetGroup}"/>
                        </p:column>
                        <p:column headerText="#{msg.assetOwnerName}" sortBy="#{item.assetOwnerName}" filterBy="#{item.assetOwnerName}" filterMatchMode="LIKE">
                            <h:outputText value="#{item.assetOwnerName}"/>
                        </p:column>
                        <p:column headerText="#{msg.assetOwnerTel}" sortBy="#{item.assetOwnerTel}" filterBy="#{item.assetOwnerTel}" filterMatchMode="LIKE">
                            <h:outputText value="#{item.assetOwnerTel}"/>
                        </p:column>
                    </p:dataTable>
                
                <p:commandButton value="#{msg.Confirm}" icon="ui-icon-check" update="growl #{selectAssetController.updateViewIDs}" actionListener="#{selectAssetController.confirmSelection()}" oncomplete="handleSubmit(args, 'varSelectAssetDlg');"/>
                <p:commandButton immediate="true" value="#{msg.Cancel}" icon="ui-icon-cancel" onclick="PF('varSelectAssetDlg').hide()"/>
            </h:form>
        </p:dialog>

    </ui:composition>
</html>
